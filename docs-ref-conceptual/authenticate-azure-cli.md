---
title: Se connecter avec Azure CLI 2.0
description: Se connecter avec Azure CLI 2.0 de façon interactive avec des informations d’identification locales
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 07/09/2018
ms.topic: conceptual
ms.technology: azure-cli
ms.devlang: azurecli
ms.service: active-directory
ms.component: authentication
ms.openlocfilehash: a0e05b3306cc273486b1b5fc887ceedbf78cb779
ms.sourcegitcommit: 64f2c628e83d687d0e172c01f13d71c8c39a8040
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2018
ms.locfileid: "38967756"
---
# <a name="sign-in-with-azure-cli-20"></a><span data-ttu-id="168a1-103">Se connecter avec Azure CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="168a1-103">Sign in with Azure CLI 2.0</span></span>

<span data-ttu-id="168a1-104">Il existe plusieurs manières de s’authentifier auprès d’Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="168a1-104">There are several ways to authenticate with the Azure CLI.</span></span> <span data-ttu-id="168a1-105">Le plus simple est de vous connecter de manière interactive par l’intermédiaire de votre navigateur, via Azure Cloud Shell ou la commande `az login`.</span><span class="sxs-lookup"><span data-stu-id="168a1-105">The easiest way to get started is to sign in interactively through your browser through either Azure Cloud Shell or the `az login` command.</span></span>
<span data-ttu-id="168a1-106">L’approche recommandée consiste à utiliser des principaux du service, qui sont des comptes à autorisations restreintes.</span><span class="sxs-lookup"><span data-stu-id="168a1-106">The recommended approach is to use service principals, which are permissions-restricted accounts.</span></span> <span data-ttu-id="168a1-107">En accordant uniquement les autorisations nécessaires à un principal du service, vous pouvez garantir que vos scripts d’automatisation sont encore plus sûrs.</span><span class="sxs-lookup"><span data-stu-id="168a1-107">By granting just the appropriate permissions needed to a service principal, you can ensure your automation scripts are even more secure.</span></span>

<span data-ttu-id="168a1-108">Aucune des informations d’identification privées n’est stockée localement.</span><span class="sxs-lookup"><span data-stu-id="168a1-108">None of your private credential information is stored locally.</span></span> <span data-ttu-id="168a1-109">Au lieu de cela, un jeton d’authentification est généré par Azure, puis stocké.</span><span class="sxs-lookup"><span data-stu-id="168a1-109">Instead, an authentication token is generated by Azure and stored.</span></span> <span data-ttu-id="168a1-110">Une fois connecté, votre jeton d’authentification est valide jusqu’à 14 jours sans être utilisé.</span><span class="sxs-lookup"><span data-stu-id="168a1-110">After signing in, your authentication token is valid until it goes for 14 days without being used.</span></span> <span data-ttu-id="168a1-111">Au-delà, vous devez vous authentifier de nouveau.</span><span class="sxs-lookup"><span data-stu-id="168a1-111">At that point, you need to re-authenticate.</span></span>

<span data-ttu-id="168a1-112">Une fois connecté, les commandes CLI sont exécutées sur votre abonnement par défaut.</span><span class="sxs-lookup"><span data-stu-id="168a1-112">After signing in, CLI Commands are run against your default subscription.</span></span> <span data-ttu-id="168a1-113">Si vous avez plusieurs abonnements, vous pouvez [modifier votre abonnement par défaut](manage-azure-subscriptions-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="168a1-113">If you have more than one subscription, you can [change your default subscription](manage-azure-subscriptions-azure-cli.md).</span></span>

## <a name="interactive-sign-in"></a><span data-ttu-id="168a1-114">Connexion interactive</span><span class="sxs-lookup"><span data-stu-id="168a1-114">Interactive sign in</span></span>

<span data-ttu-id="168a1-115">La méthode d’authentification par défaut Azure CLI utilise un navigateur web et un jeton d’accès pour la connexion.</span><span class="sxs-lookup"><span data-stu-id="168a1-115">The Azure CLI's default authentication method uses a web browser and access token to sign in.</span></span>

[!INCLUDE [interactive_login](includes/interactive-login.md)]

## <a name="command-line"></a><span data-ttu-id="168a1-116">Ligne de commande</span><span class="sxs-lookup"><span data-stu-id="168a1-116">Command line</span></span>

<span data-ttu-id="168a1-117">Fournissez vos informations d’identification d’utilisateur Azure dans la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="168a1-117">Provide your Azure user credentials on the command line.</span></span>

> [!Note]
> <span data-ttu-id="168a1-118">Cette approche ne fonctionne pas avec les comptes Microsoft ou les comptes pour lesquels l’authentification à deux facteurs est activée.</span><span class="sxs-lookup"><span data-stu-id="168a1-118">This approach doesn't work with Microsoft accounts or accounts that have two-factor authentication enabled.</span></span>

```azurecli
az login -u <username> -p <password>
```

> [!IMPORTANT]
> <span data-ttu-id="168a1-119">Si vous souhaitez éviter l’affichage de votre mot de passe sur la console et que vous utilisez `az login` de manière interactive, utilisez la commande `read -s` sous `bash`.</span><span class="sxs-lookup"><span data-stu-id="168a1-119">If you want to avoid displaying your password on console and are using `az login` interactively, use the `read -s` command under `bash`.</span></span>
>
> ```bash
> read -sp "Azure password: " AZ_PASS && echo && az login -u <username> -p $AZ_PASS
> ```
>
> <span data-ttu-id="168a1-120">Dans PowerShell, utilisez la cmdlet `Read-Host -AsSecureString` et la conversion de chaînes sécurisée.</span><span class="sxs-lookup"><span data-stu-id="168a1-120">Under PowerShell, use the `Read-Host -AsSecureString` cmdlet and secure string conversion.</span></span>
>
> ```powershell
> $securePass =  Read-Host "Azure password: " -AsSecureString;
> $AzPass = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($securePass));
> az login -u <username> -p $AzPass;
> $AzPass = ""
> ```

## <a name="sign-in-with-a-specific-tenant"></a><span data-ttu-id="168a1-121">Se connecter avec un locataire spécifique</span><span class="sxs-lookup"><span data-stu-id="168a1-121">Sign in with a specific tenant</span></span>

<span data-ttu-id="168a1-122">Si vous travaillez avec plusieurs locataires, vous pouvez sélectionner le locataire auquel vous connecter avec l’argument `--tenant`.</span><span class="sxs-lookup"><span data-stu-id="168a1-122">If you work with multiple tenants, you can select your tenant to sign in under with the `--tenant` argument.</span></span> <span data-ttu-id="168a1-123">La valeur de cet argument peut être un domaine `.onmicrosoft.com`, ou l’ID d’objet Azure du locataire.</span><span class="sxs-lookup"><span data-stu-id="168a1-123">The value of this argument can either be an `.onmicrosoft.com` domain or the Azure object ID for the tenant.</span></span> <span data-ttu-id="168a1-124">Vous pouvez vous connecter de manière interactive, ou fournir vos informations d’identification avec les arguments `--user` et `--password`.</span><span class="sxs-lookup"><span data-stu-id="168a1-124">You can sign in interactively, or provide your credentials with the `--user` and `--password` arguments.</span></span>

```azurecli
az login --tenant <tenant>
```

## <a name="sign-in-with-a-service-principal"></a><span data-ttu-id="168a1-125">Connexion avec un principal de service</span><span class="sxs-lookup"><span data-stu-id="168a1-125">Sign in with a service principal</span></span>

<span data-ttu-id="168a1-126">Les principaux de service sont des comptes non liés à un utilisateur spécifique, qui peuvent détenir des autorisations sur ces derniers par le biais de rôles prédéfinis.</span><span class="sxs-lookup"><span data-stu-id="168a1-126">Service principals are accounts not tied to any particular user, which can have permissions on them assigned through pre-defined roles.</span></span> <span data-ttu-id="168a1-127">L’authentification avec un principal de service est la meilleure façon d’écrire des scripts ou des programmes sécurisés, ce qui vous permet d’appliquer des restrictions d’autorisation et des informations d’identification statiques stockées localement.</span><span class="sxs-lookup"><span data-stu-id="168a1-127">Authenticating with a service principal is the best way to write secure scripts or programs, allowing you to apply both permissions restrictions and locally stored static credential information.</span></span> <span data-ttu-id="168a1-128">Pour en savoir plus sur les principaux de service, consultez [Créer un principal du service avec Azure CLI](create-an-azure-service-principal-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="168a1-128">To learn more about service principals, see [Create an Azure service principal with the Azure CLI](create-an-azure-service-principal-azure-cli.md).</span></span>

<span data-ttu-id="168a1-129">Pour vous connecter avec un principal du service, renseignez le nom d’utilisateur, le mot de passe ou fichier de certificat PEM, et le locataire associé au principal du service :</span><span class="sxs-lookup"><span data-stu-id="168a1-129">To sign in with a service principal, you provide the username, password or certificate PEM file, and the tenant associated with the service principal:</span></span>

```azurecli
az login --service-principal -u <app-url> -p <password-or-cert> --tenant <tenant>
```

<span data-ttu-id="168a1-130">La valeur du locataire est le locataire Azure Active Directory associé au principal du service.</span><span class="sxs-lookup"><span data-stu-id="168a1-130">The tenant value is the Azure Active Directory tenant associated with the service principal.</span></span> <span data-ttu-id="168a1-131">Il peut s’agir d’un domaine `.onmicrosoft.com`, ou de l’ID d’objet Azure du locataire.</span><span class="sxs-lookup"><span data-stu-id="168a1-131">This can either be an `.onmicrosoft.com` domain or the Azure object ID for the tenant.</span></span>
<span data-ttu-id="168a1-132">Vous pouvez obtenir l’ID objet du locataire pour votre compte actuellement actif à l’aide de la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="168a1-132">You can get the tenant object ID for your currently active account by using the following command:</span></span>

```azurecli-interactive
az account show --query 'tenantId' -o tsv
```

> [!IMPORTANT]
> <span data-ttu-id="168a1-133">Si vous souhaitez éviter l’affichage de votre mot de passe sur la console et que vous utilisez `az login` de manière interactive, utilisez la commande `read -s` sous `bash`.</span><span class="sxs-lookup"><span data-stu-id="168a1-133">If you want to avoid displaying your password on console and are using `az login` interactively, use the `read -s` command under `bash`.</span></span>
>
> ```bash
> read -sp "Azure password: " AZ_PASS && echo && az login --service-principal -u <app-url> -p $AZ_PASS --tenant <tenant>
> ```
>
> <span data-ttu-id="168a1-134">Dans PowerShell, utilisez la cmdlet `Read-Host -AsSecureString` et la conversion de chaînes sécurisée.</span><span class="sxs-lookup"><span data-stu-id="168a1-134">Under PowerShell, use the `Read-Host -AsSecureString` cmdlet and secure string conversion.</span></span>
>
> ```powershell
> $securePass =  Read-Host "Azure password: " -AsSecureString;
> $AzPass = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($securePass));
> az login --service-principal -u <app-url> -p $AzPass --tenant <tenant>;
> $AzPass = ""
> ```
