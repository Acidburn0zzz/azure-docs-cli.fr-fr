---
title: Se connecter avec Azure CLI 2.0
description: Se connecter avec Azure CLI 2.0 de façon interactive avec des informations d’identification locales
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 09/07/2018
ms.topic: conceptual
ms.technology: azure-cli
ms.devlang: azurecli
ms.service: active-directory
ms.component: authentication
ms.openlocfilehash: ef77f407284752ad4f4a1585f8a4036b32b3eb1b
ms.sourcegitcommit: 0e688704889fc88b91588bb6678a933c2d54f020
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/11/2018
ms.locfileid: "44388318"
---
# <a name="sign-in-with-azure-cli-20"></a><span data-ttu-id="65dba-103">Se connecter avec Azure CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="65dba-103">Sign in with Azure CLI 2.0</span></span>

<span data-ttu-id="65dba-104">Il existe plusieurs types d’authentification pour l’interface Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="65dba-104">There are several authentication types for the Azure CLI.</span></span> <span data-ttu-id="65dba-105">Le moyen le plus simple pour commencer est d’utiliser [Azure Cloud Shell](/azure/cloud-shell/overview), qui vous connecte automatiquement.</span><span class="sxs-lookup"><span data-stu-id="65dba-105">The easiest way to get started is with [Azure Cloud Shell](/azure/cloud-shell/overview), which automatically logs you in.</span></span> <span data-ttu-id="65dba-106">Localement, vous pouvez vous connecter de manière interactive via votre navigateur avec la commande `az login`.</span><span class="sxs-lookup"><span data-stu-id="65dba-106">Locally, you can sign in interactively through your browser with the `az login` command.</span></span> <span data-ttu-id="65dba-107">Lors de l’écriture de scripts, l’approche recommandée consiste à utiliser des principaux du service.</span><span class="sxs-lookup"><span data-stu-id="65dba-107">When writing scripts, the recommended approach is to use service principals.</span></span> <span data-ttu-id="65dba-108">En accordant uniquement les autorisations nécessaires à un principal du service, vous pouvez garantir la sécurité de votre automatisation.</span><span class="sxs-lookup"><span data-stu-id="65dba-108">By granting just the appropriate permissions needed to a service principal, you can keep your automation secure.</span></span>

<span data-ttu-id="65dba-109">Aucune de vos informations de connexion n’est stockée par l’interface CLI.</span><span class="sxs-lookup"><span data-stu-id="65dba-109">None of your sign-in information is stored by the CLI.</span></span> <span data-ttu-id="65dba-110">Au lieu de cela, un jeton d’authentification est généré par Azure, puis stocké.</span><span class="sxs-lookup"><span data-stu-id="65dba-110">Instead, an authentication token is generated by Azure and stored.</span></span> <span data-ttu-id="65dba-111">Une fois connecté, votre jeton d’authentification est valide jusqu’à 90 jours sans être utilisé.</span><span class="sxs-lookup"><span data-stu-id="65dba-111">After signing in, your authentication token is valid until it goes for 90 days without being used.</span></span>

<span data-ttu-id="65dba-112">Une fois connecté, les commandes CLI sont exécutées sur votre abonnement par défaut.</span><span class="sxs-lookup"><span data-stu-id="65dba-112">After signing in, CLI commands are run against your default subscription.</span></span> <span data-ttu-id="65dba-113">Si vous possédez plusieurs abonnements, vous pouvez [modifier votre abonnement par défaut](manage-azure-subscriptions-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="65dba-113">If you have multiple subscriptions, you can [change your default subscription](manage-azure-subscriptions-azure-cli.md).</span></span>

## <a name="sign-in-interactively"></a><span data-ttu-id="65dba-114">Connexion interactive</span><span class="sxs-lookup"><span data-stu-id="65dba-114">Sign in interactively</span></span>

<span data-ttu-id="65dba-115">La méthode d’authentification par défaut Azure CLI utilise un navigateur web et un jeton d’accès pour la connexion.</span><span class="sxs-lookup"><span data-stu-id="65dba-115">The Azure CLI's default authentication method uses a web browser and access token to sign in.</span></span>

[!INCLUDE [interactive_login](includes/interactive-login.md)]

## <a name="sign-in-with-credentials-on-the-command-line"></a><span data-ttu-id="65dba-116">Connectez-vous à l’aide de vos informations d’identification sur la ligne de commande</span><span class="sxs-lookup"><span data-stu-id="65dba-116">Sign in with credentials on the command line</span></span>

<span data-ttu-id="65dba-117">Fournissez vos informations d’identification d’utilisateur Azure dans la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="65dba-117">Provide your Azure user credentials on the command line.</span></span>

> [!Note]
> <span data-ttu-id="65dba-118">Cette approche ne fonctionne pas avec les comptes Microsoft ou les comptes pour lesquels l’authentification à deux facteurs est activée.</span><span class="sxs-lookup"><span data-stu-id="65dba-118">This approach doesn't work with Microsoft accounts or accounts that have two-factor authentication enabled.</span></span>

```azurecli
az login -u <username> -p <password>
```

> [!IMPORTANT]
> <span data-ttu-id="65dba-119">Si vous souhaitez éviter l’affichage de votre mot de passe sur la console et que vous utilisez `az login` de manière interactive, utilisez la commande `read -s` sous `bash`.</span><span class="sxs-lookup"><span data-stu-id="65dba-119">If you want to avoid displaying your password on console and are using `az login` interactively, use the `read -s` command under `bash`.</span></span>
>
> ```bash
> read -sp "Azure password: " AZ_PASS && echo && az login -u <username> -p $AZ_PASS
> ```
>
> <span data-ttu-id="65dba-120">Dans PowerShell, utilisez la cmdlet `Read-Host -AsSecureString` et la conversion de chaînes sécurisée.</span><span class="sxs-lookup"><span data-stu-id="65dba-120">Under PowerShell, use the `Read-Host -AsSecureString` cmdlet and secure string conversion.</span></span>
>
> ```powershell
> $securePass =  Read-Host "Azure password: " -AsSecureString;
> $AzPass = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($securePass));
> az login -u <username> -p $AzPass;
> $AzPass = ""
> ```

## <a name="sign-in-with-a-specific-tenant"></a><span data-ttu-id="65dba-121">Se connecter avec un locataire spécifique</span><span class="sxs-lookup"><span data-stu-id="65dba-121">Sign in with a specific tenant</span></span>

<span data-ttu-id="65dba-122">Vous pouvez sélectionner un locataire pour vous connecter avec l’argument `--tenant`.</span><span class="sxs-lookup"><span data-stu-id="65dba-122">You can select a tenant to sign in under with the `--tenant` argument.</span></span> <span data-ttu-id="65dba-123">La valeur de cet argument peut être un domaine `.onmicrosoft.com`, ou l’ID d’objet Azure du locataire.</span><span class="sxs-lookup"><span data-stu-id="65dba-123">The value of this argument can either be an `.onmicrosoft.com` domain or the Azure object ID for the tenant.</span></span> <span data-ttu-id="65dba-124">Les méthodes de connexion interactive et avec une ligne de commande fonctionnent toutes les deux avec `--tenant`.</span><span class="sxs-lookup"><span data-stu-id="65dba-124">Both interactive and command-line sign in methods work with `--tenant`.</span></span>

```azurecli
az login --tenant <tenant>
```

## <a name="sign-in-with-a-service-principal"></a><span data-ttu-id="65dba-125">Connexion avec un principal de service</span><span class="sxs-lookup"><span data-stu-id="65dba-125">Sign in with a service principal</span></span>

<span data-ttu-id="65dba-126">Les principaux de service sont des comptes non liés à un utilisateur spécifique, qui peuvent détenir des autorisations sur ces derniers par le biais de rôles prédéfinis.</span><span class="sxs-lookup"><span data-stu-id="65dba-126">Service principals are accounts not tied to any particular user, which can have permissions on them assigned through pre-defined roles.</span></span> <span data-ttu-id="65dba-127">L’authentification avec un principal de service est la meilleure façon d’écrire des scripts ou des programmes sécurisés, ce qui vous permet d’appliquer des restrictions d’autorisation et des informations d’identification statiques stockées localement.</span><span class="sxs-lookup"><span data-stu-id="65dba-127">Authenticating with a service principal is the best way to write secure scripts or programs, allowing you to apply both permissions restrictions and locally stored static credential information.</span></span> <span data-ttu-id="65dba-128">Pour en savoir plus sur les principaux de service, consultez [Créer un principal du service avec Azure CLI](create-an-azure-service-principal-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="65dba-128">To learn more about service principals, see [Create an Azure service principal with the Azure CLI](create-an-azure-service-principal-azure-cli.md).</span></span>

<span data-ttu-id="65dba-129">Pour vous connecter avec un principal de service, il vous faut :</span><span class="sxs-lookup"><span data-stu-id="65dba-129">To sign in with a service principal, you need:</span></span>

* <span data-ttu-id="65dba-130">L’URL ou le nom associé au principal du service</span><span class="sxs-lookup"><span data-stu-id="65dba-130">The URL or name associated with the service principal</span></span>
* <span data-ttu-id="65dba-131">Le mot de passe du principal de service ou le certificat X509 utilisé pour créer le principal du service au format PEM</span><span class="sxs-lookup"><span data-stu-id="65dba-131">The service principal password, or the X509 certificate used to create the service principal in PEM format</span></span>
* <span data-ttu-id="65dba-132">Le locataire associé au principal du service, comme un domaine `.onmicrosoft.com` ou un ID d’objet Azure</span><span class="sxs-lookup"><span data-stu-id="65dba-132">The tenant associated with the service principal, as either an `.onmicrosoft.com` domain or Azure object ID</span></span>

```azurecli
az login --service-principal -u <app-url> -p <password-or-cert> --tenant <tenant>
```

> [!IMPORTANT]
> <span data-ttu-id="65dba-133">Si vous souhaitez éviter l’affichage de votre mot de passe sur la console et que vous utilisez `az login` de manière interactive, utilisez la commande `read -s` sous `bash`.</span><span class="sxs-lookup"><span data-stu-id="65dba-133">If you want to avoid displaying your password on console and are using `az login` interactively, use the `read -s` command under `bash`.</span></span>
>
> ```bash
> read -sp "Azure password: " AZ_PASS && echo && az login --service-principal -u <app-url> -p $AZ_PASS --tenant <tenant>
> ```
>
> <span data-ttu-id="65dba-134">Dans PowerShell, utilisez la cmdlet `Read-Host -AsSecureString` et la conversion de chaînes sécurisée.</span><span class="sxs-lookup"><span data-stu-id="65dba-134">Under PowerShell, use the `Read-Host -AsSecureString` cmdlet and secure string conversion.</span></span>
>
> ```powershell
> $securePass =  Read-Host "Azure password: " -AsSecureString;
> $AzPass = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($securePass));
> az login --service-principal -u <app-url> -p $AzPass --tenant <tenant>;
> $AzPass = ""
> ```
